package com.ldkj.portable.xmlparsers;import com.ldkj.portable.beans.DeviceConfig;import java.io.File;import java.io.FileWriter;import java.io.IOException;import org.dom4j.Document;import org.dom4j.DocumentException;import org.dom4j.DocumentHelper;import org.dom4j.io.SAXReader;import org.dom4j.io.XMLWriter;public abstract class XmlParser<T> {	private T t;	private String xmlPath = "";	private Document document = null;		public XmlParser(String pXmlPath) {		this.xmlPath = pXmlPath;	}		private void openXML() throws DocumentException{		if(document == null){			SAXReader _SaxReader = new SAXReader();			File _File = new File(xmlPath);			document = _SaxReader.read(_File);		}	}			public T getConfig() throws DocumentException{		openXML();        t = getValue(document);      //  document = null;		return t;	}		public void saveConfig(T pT) throws DocumentException, IOException{		openXML();		setValue(document, pT);        saveXML();	}    private void saveXML() throws IOException {        XMLWriter _XmlWriter = new XMLWriter(new FileWriter(new File(xmlPath)));        _XmlWriter.write(document);        _XmlWriter.close();        document = null;    }    public void initXML(T pObj) throws IOException {		File _file = new File(xmlPath);		if(!_file.exists()){            document = DocumentHelper.createDocument();            saveValue(document,pObj);            saveXML();			// 发送消息 告诉设备去发广播搜寻设备					}			}			/**	 * 获取配置文件中的内容 	 * @param pDocument	 * @return	 */	 protected abstract T getValue(Document pDocument);		/**	 * 更新配置文件的内容	 * @param pDocument	 * @param pObj	 */	protected abstract void setValue(Document pDocument,T pObj);	/**	 * 初始化配置文件	 * @param pDocument	 * @param pObj	 */	protected abstract void saveValue(Document pDocument,T pObj) ;		}